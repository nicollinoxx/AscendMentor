<% content_for :title, "Messages" %>

<div class="w-full mb-20"   data-controller='scroll'>
  <div class="flex justify-between items-center">
    <h1 class="font-bold text-4xl mb-3">Messages</h1>
  </div>

  <div id="messages" class="min-w-50">
    <%= turbo_stream_from @chat %>

    <% @messages.each do |message| %>
      <%= render message, chat: @chat %>
    <% end %>
  </div>

  <div class="sticky bottom-0">
    <button data-scroll-target="scrollButton" data-action="click->scroll#scrollToEnd" class="bg-blue-600 text-white px-4 py-2 rounded-lg shadow-lg">
      Go to End
    </button>


    <%= turbo_frame_tag "new_message" do %>
      <% if notice.present? %>
        <p class="py-2 px-3 text-sm bg-green-50 my-1 text-green-500 font-medium rounded-md inline-block" id="notice"><%= notice %></p>
      <% end %>

      <%= render "form", { message: @chat.messages.build } %>
    <% end %>
  </div>
</div>
